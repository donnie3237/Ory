[
  {
    "id": "public-route",
    "match": { "url": "http://127.0.0.1:4455/hello/public", "methods": ["GET"] },
    "authenticators": [{ "handler": "noop" }],
    "authorizer": { "handler": "allow" },
    "mutators": [{ "handler": "noop" }],
    "upstream": { "url": "http://hello_service" }
  },
  {
    "id": "profile-route-for-users",
    "match": { "url": "http://127.0.0.1:4455/profile", "methods": ["GET"] },
    "authenticators": [{ "handler": "cookie_session" }],
    "authorizer": {
      "handler": "keto_engine_acp_ory",
      "config": {
        "subject": "users#members@{{ .Authentication.Subject }}",
        "action": "view",
        "resource": "profile"
      }
    },
    "mutators": [{ "handler": "id_token" }],
    "upstream": { "url": "http://hello_service" }
  },
  {
    "id": "admin-route",
    "match": { "url": "http://127.0.0.1:4455/admin", "methods": ["GET"] },
    "authenticators": [{ "handler": "cookie_session" }],
    "authorizer": {
      "handler": "keto_engine_acp_ory",
      "config": {
        "subject": "admins#members@{{ .Authentication.Subject }}",
        "action": "access",
        "resource": "admin-panel"
      }
    },
    "mutators": [{ "handler": "id_token" }],
    "upstream": { "url": "http://hello_service" }
  },
  {
    "id": "super-admin-route",
    "match": { "url": "http://127.0.0.1:4455/super-admin", "methods": ["GET"] },
    "authenticators": [{ "handler": "cookie_session" }],
    "authorizer": {
      "handler": "keto_engine_acp_ory",
      "config": {
        "subject": "super-admins#members@{{ .Authentication.Subject }}",
        "action": "god-mode",
        "resource": "system"
      }
    },
    "mutators": [{ "handler": "id_token" }],
    "upstream": { "url": "http://hello_service" }
  }
]